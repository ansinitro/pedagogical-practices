<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 8: Graph Definitions</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
        integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
        integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8"
        crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
        integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
</head>

<body>
    <a href="index.html"
        style="position: fixed; top: 20px; left: 20px; z-index: 1000; color: rgba(255,255,255,0.6); text-decoration: none; font-size: 0.9rem; padding: 0.5rem 1rem; border: 1px solid rgba(255,255,255,0.1); border-radius: 99px; background: rgba(0,0,0,0.3); backdrop-filter: blur(4px); transition: all 0.2s;"
        onmouseover="this.style.color='white'; this.style.borderColor='white'"
        onmouseout="this.style.color='rgba(255,255,255,0.6)'; this.style.borderColor='rgba(255,255,255,0.1)'">← Back to
        Menu</a>

    <div class="progress-nav">
        <div class="nav-dot active" data-label="Intro" onclick="scrollToRow(0)"></div>
        <div class="nav-dot" data-label="Prob 1" onclick="scrollToRow(1)"></div>
        <div class="nav-dot" data-label="Prob 3" onclick="scrollToRow(2)"></div>
        <div class="nav-dot" data-label="Prob 5" onclick="scrollToRow(3)"></div>
        <div class="nav-dot" data-label="Prob 12" onclick="scrollToRow(4)"></div>
        <div class="nav-dot" data-label="Prob 15" onclick="scrollToRow(5)"></div>
        <div class="nav-dot" data-label="Prob 17" onclick="scrollToRow(6)"></div>
        <div class="nav-dot" data-label="Prob 18" onclick="scrollToRow(7)"></div>
    </div>

    <div id="deck">

        <!-- Slide 1: Title -->
        <div class="row">
            <div class="slide">
                <div class="slide-content">
                    <h1>Section 2</h1>
                    <h2>Graph Definitions & Properties</h2>
                    <div class="math-block">Vertices, Edges, Degrees, Subgraphs</div>
                </div>
                <button class="nav-arrow arrow-down" onclick="scrollToRow(1)" title="Next Slide"><svg
                        viewBox="0 0 24 24">
                        <path d="M7 13l5 5 5-5M7 6l5 5 5-5" />
                    </svg></button>
            </div>
        </div>

        <!-- Problem 1 -->
        <div class="row">
            <div class="slide">
                <div class="slide-content">
                    <h3>Problem 1</h3>
                    <p style="font-size: 1.1em; line-height: 1.6;">
                        [BB] Draw a graph with five vertices \( v_1, v_2, v_3, v_4, v_5 \) such that \( \deg(v_1)=3 \),
                        \( v_2 \) is an odd vertex, \( \deg(v_3)=2 \), and \( v_4 \) and \( v_5 \) are adjacent.
                    </p>
                </div>
                <button class="nav-arrow arrow-right" onclick="navigateGrid(1, 1)" title="Solution"><svg
                        viewBox="0 0 24 24">
                        <path d="M13 7l5 5-5 5M6 7l5 5-5 5" />
                    </svg></button>
                <button class="nav-arrow arrow-down" onclick="scrollToRow(2)" title="Next"><svg viewBox="0 0 24 24">
                        <path d="M7 13l5 5 5-5M7 6l5 5 5-5" />
                    </svg></button>
            </div>
            <div class="slide solution-slide" style="margin: 0; padding: 0; width: 100%;">
                <div class="slide-content"
                    style="display: flex; flex-direction: column; height: 70vh; max-width: 100000px; width: 70%; margin: 0 auto; padding: 2rem;">

                    <!-- Content Area (Grid) -->
                    <div
                        style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; flex: 1; overflow: hidden; min-height: 0; width: 100%; margin: 0; padding: 0; ">
                        <!-- Left: Interactive Text Steps -->
                        <div
                            style="text-align: left; overflow-y: auto; padding-right: 1rem; position: relative; display: flex; flex-direction: column;">
                            <style>
                                .hidden {
                                    display: none !important;
                                }

                                .progress-bar {
                                    display: flex;
                                    justify-content: space-between;
                                    margin-bottom: 2rem;
                                    position: relative;
                                    padding: 5px 10px;
                                    width: 100%;
                                }

                                .progress-bar::before {
                                    content: '';
                                    position: absolute;
                                    top: 50%;
                                    left: 15px;
                                    right: 15px;
                                    height: 3px;
                                    background: rgba(255, 255, 255, 0.1);
                                    z-index: 0;
                                    transform: translateY(-50%);
                                    border-radius: 10px;
                                }

                                .step-circle {
                                    width: 32px;
                                    height: 32px;
                                    border-radius: 50%;
                                    background: var(--card-bg);
                                    border: 2px solid rgba(255, 255, 255, 0.1);
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    z-index: 1;
                                    font-weight: bold;
                                    font-size: 0.85rem;
                                    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                                    color: var(--text-muted);
                                }

                                .step-circle.active {
                                    background: var(--accent-color);
                                    border-color: var(--highlight);
                                    color: #fff;
                                    box-shadow: 0 0 15px rgba(50, 100, 255, 0.6);
                                    transform: scale(1.15);
                                }

                                .step-circle.completed {
                                    background: var(--success);
                                    border-color: var(--success);
                                    color: #fff;
                                }

                                .btn-primary {
                                    background: linear-gradient(135deg, var(--accent-color), #3b82f6);
                                    color: white;
                                    padding: 0.8rem 2rem;
                                    border: none;
                                    border-radius: 50px;
                                    font-weight: bold;
                                    font-size: 0.95rem;
                                    box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                }

                                .btn-primary:hover {
                                    transform: translateY(-2px);
                                    box-shadow: 0 6px 20px rgba(59, 130, 246, 0.6);
                                }

                                .btn-secondary {
                                    background: rgba(255, 255, 255, 0.05);
                                    border: 1px solid rgba(255, 255, 255, 0.2);
                                    color: var(--text-main);
                                    padding: 0.8rem 1.8rem;
                                    border-radius: 50px;
                                    font-weight: bold;
                                    font-size: 0.95rem;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                    backdrop-filter: blur(5px);
                                }

                                .btn-secondary:hover {
                                    background: rgba(255, 255, 255, 0.15);
                                    border-color: var(--accent-color);
                                    transform: translateY(-2px);
                                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
                                }
                            </style>

                            <!-- Progress -->
                            <div class="progress-bar">
                                <div class="step-circle active" id="sc-1">1</div>
                                <div class="step-circle" id="sc-2">2</div>
                                <div class="step-circle" id="sc-3">3</div>
                                <div class="step-circle" id="sc-4">4</div>
                                <div class="step-circle" id="sc-5">5</div>
                                <div class="step-circle" id="sc-6">6</div>
                            </div>

                            <h3>Step-by-Step Solution</h3>

                            <!-- Step 1 to 6 (Same Content) -->
                            <div class="p1-step" id="p1-step-1">
                                <h4 style="color: var(--highlight);">Step 1: Understand Requirements</h4>
                                <p>We have 5 vertices \( v_1, v_2, v_3, v_4, v_5 \). <br><strong>Required:</strong></p>
                                <ul>
                                    <li>\(\deg(v_1)=3\)</li>
                                    <li>\(\deg(v_3)=2\)</li>
                                    <li>\(\deg(v_2)\) is odd</li>
                                    <li>Mandatory Edge: \((v_4, v_5)\)</li>
                                </ul>
                                <p><em>Graph initialized with 5 vertices.</em></p>
                            </div>
                            <div class="p1-step hidden" id="p1-step-2">
                                <h4 style="color: var(--highlight);">Step 2: Mandatory Adjacency</h4>
                                <p>Since \( v_4 \) and \( v_5 \) must be adjacent, add edge \((v_4, v_5)\).</p>
                                <p class="status-box">Current Status:<br>\(\deg(v_4)=1\)<br>\(\deg(v_5)=1\)</p>
                            </div>
                            <div class="p1-step hidden" id="p1-step-3">
                                <h4 style="color: var(--highlight);">Step 3: Satisfy \(\deg(v_1)=3\)</h4>
                                <p>Connect \( v_1 \) to three distinct vertices: \( v_2, v_3, v_4 \).</p>
                                <p>Add edges: \((v_1,v_2), (v_1,v_3), (v_1,v_4)\).</p>
                                <p class="status-box">Status:<br>\(\deg(v_1)=3\) ✅<br>\(\deg(v_4)=2\)</p>
                            </div>
                            <div class="p1-step hidden" id="p1-step-4">
                                <h4 style="color: var(--highlight);">Step 4: Satisfy \(\deg(v_3)=2\)</h4>
                                <p>Currently \(\deg(v_3)=1\). We need one more edge.</p>
                                <p>Connect \( v_3 \) to \( v_5 \). Add edge \((v_3, v_5)\).</p>
                                <p class="status-box">Status:<br>\(\deg(v_3)=2\) ✅</p>
                            </div>
                            <div class="p1-step hidden" id="p1-step-5">
                                <h4 style="color: var(--highlight);">Step 5: Check \( v_2 \)</h4>
                                <p>Currently \(\deg(v_2)=1\).</p>
                                <p class="status-box">Status:<br>1 is Odd. Condition satisfied ✅</p>
                            </div>
                            <div class="p1-step hidden" id="p1-step-6">
                                <h4 style="color: var(--success);">Step 6: Final Check</h4>
                                <table class="data-table" style="width: 100%; font-size: 0.9em;">
                                    <tr>
                                        <th>Vertex</th>
                                        <th>Degree</th>
                                        <th>Check</th>
                                    </tr>
                                    <tr>
                                        <td>\(v_1\)</td>
                                        <td>3</td>
                                        <td>✅</td>
                                    </tr>
                                    <tr>
                                        <td>\(v_2\)</td>
                                        <td>1 (Odd)</td>
                                        <td>✅</td>
                                    </tr>
                                    <tr>
                                        <td>\(v_3\)</td>
                                        <td>2</td>
                                        <td>✅</td>
                                    </tr>
                                    <tr>
                                        <td>\(v_4\)</td>
                                        <td>2</td>
                                        <td>-</td>
                                    </tr>
                                    <tr>
                                        <td>\(v_5\)</td>
                                        <td>2</td>
                                        <td>-</td>
                                    </tr>
                                </table>
                                <p style="margin-top: 1rem;"><strong>Edge
                                        List:</strong><br>\(\{(v_1,v_2),(v_1,v_3),(v_1,v_4),(v_4,v_5),(v_3,v_5)\}\)</p>
                                <div class="highlight-box">
                                    <p><strong>Teaching Note:</strong> There is no unique answer. Key is to build
                                        gradually.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Right: Dynamic Graph -->
                        <div>
                            <div id="p1-graph"
                                style="height: 300px; width: 100%; background: rgba(0,0,0,0.2); border-radius: 12px; border: 1px solid var(--glass-border);">
                            </div>
                            <p
                                style="font-size: 0.8rem; margin-top: 0.5rem; color: var(--accent-color); text-align: center;">
                                Graph Visualization</p>
                        </div>
                    </div>

                    <!-- Footer: Controls (Full Width) -->
                    <div
                        style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--glass-border); display: flex; justify-content: space-between; align-items: center;">
                        <!-- Back Button -->
                        <button class="btn-secondary hidden" onclick="prevStepP1()" id="p1-back-btn">⬅ Back</button>

                        <!-- Next / Reset Buttons -->
                        <div style="margin-left: auto;">
                            <button class="btn-primary" onclick="nextStepP1()" id="p1-next-btn">Next Step ➜</button>
                            <button class="btn-secondary hidden" onclick="resetP1()" id="p1-reset-btn">Reset
                                Solution</button>
                        </div>
                    </div>
                </div>
                <button class="nav-arrow arrow-left" onclick="navigateGrid(1, 0)" title="Back to Task"><svg
                        viewBox="0 0 24 24">
                        <path d="M15 19l-7-7 7-7" />
                    </svg></button>
            </div>
        </div>



        <!-- Problem 3 -->
        <div class="row">
            <div class="slide">
                <div class="slide-content">
                    <h3>Problem 3</h3>
                    <p style="font-size: 1.1em; line-height: 1.6;">
                        [BB] Give an example of a graph such that every vertex is adjacent to two vertices and
                        every
                        edge is adjacent to two edges.
                    </p>
                </div>
                <button class="nav-arrow arrow-right" onclick="navigateGrid(2, 1)" title="Solution"><svg
                        viewBox="0 0 24 24">
                        <path d="M13 7l5 5-5 5M6 7l5 5-5 5" />
                    </svg></button>
                <button class="nav-arrow arrow-down" onclick="scrollToRow(3)" title="Next"><svg viewBox="0 0 24 24">
                        <path d="M7 13l5 5 5-5M7 6l5 5 5-5" />
                    </svg></button>
            </div>
            <div class="slide solution-slide">
                <div class="slide-content"
                    style="display: flex; flex-direction: column; height: 75vh; max-width: 100000px; width: 70%; margin: 0 auto; padding: 2rem;">

                    <!-- Content Area (Grid) -->
                    <div
                        style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; flex: 1; overflow: hidden; min-height: 0;">
                        <!-- Left: Steps -->
                        <div
                            style="text-align: left; overflow-y: auto; padding-right: 1rem; position: relative; display: flex; flex-direction: column;">

                            <!-- Progress Bar -->
                            <div class="progress-bar">
                                <div class="step-circle active" id="sc-p3-1">1</div>
                                <div class="step-circle" id="sc-p3-2">2</div>
                                <div class="step-circle" id="sc-p3-3">3</div>
                                <div class="step-circle" id="sc-p3-4">4</div>
                                <div class="step-circle" id="sc-p3-5">5</div>
                                <div class="step-circle" id="sc-p3-6">6</div>
                            </div>

                            <h3>Step-by-Step Solution</h3>

                            <!-- Step 1 -->
                            <div class="p3-step" id="p3-step-1">
                                <h4 style="color: var(--highlight);">Step 1: Understand Conditions</h4>
                                <p><strong>Condition 1:</strong> "Every vertex adjacent to 2 vertices" <br>\(\implies\)
                                    Graph is <strong>2-regular</strong> (\(\deg(v)=2\)).</p>
                                <p><strong>Condition 2:</strong> "Every edge adjacent to 2 edges" <br>\(\implies\) Each
                                    edge
                                    shares endpoints with exactly 2 other edges.</p>
                                <p class="status-box">We need to construct ONE example.</p>
                            </div>

                            <!-- Step 2 -->
                            <div class="p3-step hidden" id="p3-step-2">
                                <h4 style="color: var(--highlight);">Step 2: Propose Example</h4>
                                <p>A natural 2-regular graph is a <strong>Cycle</strong>.</p>
                                <p>Let's try a Cycle Graph \( C_4 \) (a Square) with 4 vertices.</p>
                            </div>

                            <!-- Step 3 -->
                            <div class="p3-step hidden" id="p3-step-3">
                                <h4 style="color: var(--highlight);">Step 3: Define Graph</h4>
                                <p><strong>Vertices:</strong> \( v_1, v_2, v_3, v_4 \)</p>
                                <p><strong>Edges:</strong> \( (v_1,v_2), (v_2,v_3), (v_3,v_4), (v_4,v_1) \)</p>
                                <p class="status-box">This forms a closed loop.</p>
                            </div>

                            <!-- Step 4 -->
                            <div class="p3-step hidden" id="p3-step-4">
                                <h4 style="color: var(--highlight);">Step 4: Verify Condition 1 (Vertices)</h4>
                                <ul>
                                    <li>\(\deg(v_1)\): connected to \(v_2, v_4\) \(\to 2\)</li>
                                    <li>\(\deg(v_2)\): connected to \(v_1, v_3\) \(\to 2\)</li>
                                    <li>\(\deg(v_3)\): connected to \(v_2, v_4\) \(\to 2\)</li>
                                    <li>\(\deg(v_4)\): connected to \(v_3, v_1\) \(\to 2\)</li>
                                </ul>
                                <p style="color: var(--success);">Condition 1 Satisfied ✅</p>
                            </div>

                            <!-- Step 5 -->
                            <div class="p3-step hidden" id="p3-step-5">
                                <h4 style="color: var(--highlight);">Step 5: Verify Condition 2 (Edges)</h4>
                                <p>Take edge \( e = (v_1, v_2) \):</p>
                                <ul>
                                    <li>At \(v_1\), it touches \((v_4, v_1)\).</li>
                                    <li>At \(v_2\), it touches \((v_2, v_3)\).</li>
                                </ul>
                                <p>Total adjacent edges = 2.</p>
                                <p style="color: var(--success);">Condition 2 Satisfied ✅</p>
                            </div>

                            <!-- Step 6 -->
                            <div class="p3-step hidden" id="p3-step-6">
                                <h4 style="color: var(--success);">Step 6: Final Conclusion</h4>
                                <p>The Cycle Graph \( C_4 \) satisfies both conditions.</p>
                                <div class="highlight-box">
                                    <p><strong>Teaching Note:</strong> Any cycle \( C_n \) with \( n \ge 3 \) works.</p>
                                </div>
                            </div>

                        </div>

                        <!-- Right: Graph -->
                        <div>
                            <div id="p3-graph"
                                style="height: 300px; width: 100%; background: rgba(0,0,0,0.2); border-radius: 12px; border: 1px solid var(--glass-border);">
                            </div>
                            <p
                                style="font-size: 0.8rem; margin-top: 0.5rem; color: var(--accent-color); text-align: center;">
                                Graph: Cycle \( C_4 \)</p>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div
                        style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--glass-border); display: flex; justify-content: space-between; align-items: center;">
                        <button class="btn-secondary hidden" onclick="prevStepP3()" id="p3-back-btn">⬅ Back</button>
                        <div style="margin-left: auto;">
                            <button class="btn-primary" onclick="nextStepP3()" id="p3-next-btn">Next Step ➜</button>
                            <button class="btn-secondary hidden" onclick="resetP3()" id="p3-reset-btn">Reset
                                Solution</button>
                        </div>
                    </div>
                </div>
                <button class="nav-arrow arrow-left" onclick="navigateGrid(2, 0)" title="Back to Task"><svg
                        viewBox="0 0 24 24">
                        <path d="M15 19l-7-7 7-7" />
                    </svg></button>
            </div>
        </div>

        <!-- Problem 5, 12, 15, 17, 18 Placeholders... -->
        <!-- I will abbreviate the remaining slides for brevity, but assume full structure in real file -->

        <!-- Problem 5 -->
        <div class="row">
            <div class="slide">
                <div class="slide-content">
                    <h3>Problem 5</h3>
                    <p>Draw \( K_5 \) (Complete Graph on 5 vertices).</p>
                </div>
                <button class="nav-arrow arrow-right" onclick="navigateGrid(3, 1)" title="Solution"><svg
                        viewBox="0 0 24 24">
                        <path d="M13 7l5 5-5 5M6 7l5 5-5 5" />
                    </svg></button>
                <button class="nav-arrow arrow-down" onclick="scrollToRow(4)"><svg viewBox="0 0 24 24">
                        <path d="M7 13l5 5 5-5M7 6l5 5 5-5" />
                    </svg></button>
            </div>
            <div class="slide solution-slide">
                <div class="slide-content"
                    style="display: flex; flex-direction: column; height: 75vh; max-width: 100000px; width: 70%; margin: 0 auto; padding: 2rem;">

                    <!-- Content Area (Grid) -->
                    <div
                        style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; flex: 1; overflow: hidden; min-height: 0;">
                        <!-- Left: Steps -->
                        <div
                            style="text-align: left; overflow-y: auto; padding-right: 1rem; position: relative; display: flex; flex-direction: column;">

                            <!-- Progress Bar -->
                            <div class="progress-bar">
                                <div class="step-circle active" id="sc-p5-1">1</div>
                                <div class="step-circle" id="sc-p5-2">2</div>
                                <div class="step-circle" id="sc-p5-3">3</div>
                                <div class="step-circle" id="sc-p5-4">4</div>
                                <div class="step-circle" id="sc-p5-5">5</div>
                            </div>

                            <h3>Step-by-Step Solution</h3>

                            <!-- Step 1 -->
                            <div class="p5-step" id="p5-step-1">
                                <h4 style="color: var(--highlight);">Step 1: Understand "As Many As Possible"</h4>
                                <p>To maximize edges in a simple graph (no loops/multi-edges):</p>
                                <ul>
                                    <li>Every pair of distinct vertices must be connected.</li>
                                    <li>This makes it a <strong>Complete Graph</strong>.</li>
                                </ul>
                            </div>

                            <!-- Step 2 -->
                            <div class="p5-step hidden" id="p5-step-2">
                                <h4 style="color: var(--highlight);">Step 2: Identify Graph Type</h4>
                                <p>With 5 vertices where every vertex connects to every other vertex, it is denoted as:
                                </p>
                                <div class="math-block">$$ K_5 $$</div>
                                <p class="status-box">"Complete graph on 5 vertices"</p>
                            </div>

                            <!-- Step 3 -->
                            <div class="p5-step hidden" id="p5-step-3">
                                <h4 style="color: var(--highlight);">Step 3: Count Edges</h4>
                                <p>Formula for edges in \( K_n \):</p>
                                <div class="math-block">$$ |E| = \frac{n(n-1)}{2} $$</div>
                                <p>For \( n=5 \):</p>
                                <div class="math-block">$$ \frac{5(4)}{2} = \frac{20}{2} = 10 $$</div>
                            </div>

                            <!-- Step 4 -->
                            <div class="p5-step hidden" id="p5-step-4">
                                <h4 style="color: var(--highlight);">Step 4: Describe Graph</h4>
                                <p><strong>Vertices:</strong> \( v_1, \dots, v_5 \)</p>
                                <p><strong>Degree:</strong> Every vertex has degree \( 4 \) (connected to the other 4).
                                </p>
                                <p><strong>Edges:</strong> All \(\binom{5}{2} = 10\) pairs.</p>
                            </div>

                            <!-- Step 5 -->
                            <div class="p5-step hidden" id="p5-step-5">
                                <h4 style="color: var(--success);">Step 5: Final Answer</h4>
                                <p><strong>Max Edges:</strong> 10</p>
                                <p><strong>Name:</strong> Complete Graph</p>
                                <p><strong>Notation:</strong> \( K_5 \)</p>
                                <div class="highlight-box">
                                    <p><strong>Teaching Note:</strong> Drawing \( K_5 \) involves a pentagon with a
                                        pentagram inside (star).</p>
                                </div>
                            </div>

                        </div>

                        <!-- Right: Graph -->
                        <div>
                            <div id="p5-graph"
                                style="height: 300px; width: 100%; background: rgba(0,0,0,0.2); border-radius: 12px; border: 1px solid var(--glass-border);">
                            </div>
                            <p
                                style="font-size: 0.8rem; margin-top: 0.5rem; color: var(--accent-color); text-align: center;">
                                Graph: \( K_5 \)</p>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div
                        style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--glass-border); display: flex; justify-content: space-between; align-items: center;">
                        <button class="btn-secondary hidden" onclick="prevStepP5()" id="p5-back-btn">⬅ Back</button>
                        <div style="margin-left: auto;">
                            <button class="btn-primary" onclick="nextStepP5()" id="p5-next-btn">Next Step ➜</button>
                            <button class="btn-secondary hidden" onclick="resetP5()" id="p5-reset-btn">Reset
                                Solution</button>
                        </div>
                    </div>
                </div>
                <!-- Back Arrow out of slide content -->
                <button class="nav-arrow arrow-left" onclick="navigateGrid(3, 0)"><svg viewBox="0 0 24 24">
                        <path d="M15 19l-7-7 7-7" />
                    </svg></button>
            </div>
        </div>

        <!-- Problem 12 -->
        <div class="row">
            <div class="slide">
                <div class="slide-content">
                    <h3>Problem 12</h3>
                    <p style="font-size: 1.1em; line-height: 1.6;">
                        Does there exist a graph \( G \) with <strong>28 edges</strong> and <strong>12
                            vertices</strong>,
                        each of degree:
                    </p>
                    <ul style="font-size: 1.1em; margin-top: 1rem;">
                        <li><strong>(a)</strong> 3 or 4?</li>
                        <li><strong>(b)</strong> 3 or 6?</li>
                    </ul>
                </div>
                <button class="nav-arrow arrow-right" onclick="navigateGrid(4, 1)" title="Solution"><svg
                        viewBox="0 0 24 24">
                        <path d="M13 7l5 5-5 5M6 7l5 5-5 5" />
                    </svg></button>
                <button class="nav-arrow arrow-down" onclick="scrollToRow(5)"><svg viewBox="0 0 24 24">
                        <path d="M7 13l5 5 5-5M7 6l5 5 5-5" />
                    </svg></button>
            </div>
            <div class="slide solution-slide">
                <div class="slide-content"
                    style="display: flex; flex-direction: column; height: 75vh; max-width: 100000px; width: 70%; margin: 0 auto; padding: 2rem;">

                    <!-- Content Area (Grid) -->
                    <div
                        style="display: grid; grid-template-columns: 1.5fr 1fr; gap: 2rem; flex: 1; overflow: hidden; min-height: 0;">
                        <!-- Left: Steps -->
                        <div
                            style="text-align: left; overflow-y: auto; padding-right: 1rem; position: relative; display: flex; flex-direction: column;">

                            <!-- Progress Bar -->
                            <div class="progress-bar">
                                <div class="step-circle active" id="sc-p12-1">1</div>
                                <div class="step-circle" id="sc-p12-2">2</div>
                                <div class="step-circle" id="sc-p12-3">3</div>
                                <div class="step-circle" id="sc-p12-4">4</div>
                                <div class="step-circle" id="sc-p12-5">5</div>
                                <div class="step-circle" id="sc-p12-6">6</div>
                            </div>

                            <h3>Step-by-Step Solution</h3>

                            <!-- Step 1 -->
                            <div class="p12-step" id="p12-step-1">
                                <h4 style="color: var(--highlight);">Step 1: Handshaking Lemma</h4>
                                <p>For any graph:</p>
                                <div class="math-block">$$ \sum \deg(v) = 2 \times |E| $$</div>
                                <p>Given \( |E| = 28 \):</p>
                                <div class="math-block">$$ \sum \deg(v) = 2 \times 28 = 56 $$</div>
                                <p class="status-box">Total Degree Sum must be <strong>56</strong>.</p>
                            </div>

                            <!-- Step 2 -->
                            <div class="p12-step hidden" id="p12-step-2">
                                <h4 style="color: var(--highlight);">Step 2: Part (a) Setup</h4>
                                <p>Lat \( x \) = vertices of degree 3, \( y \) = vertices of degree 4.</p>
                                <p>Total vertices = 12:</p>
                                <div class="math-block">$$ x + y = 12 \implies x = 12 - y $$</div>
                                <p>Target Sum = 56:</p>
                                <div class="math-block">$$ 3x + 4y = 56 $$</div>
                            </div>

                            <!-- Step 3 -->
                            <div class="p12-step hidden" id="p12-step-3">
                                <h4 style="color: var(--highlight);">Step 3: Part (a) Solve</h4>
                                <p>Substitute \( x = 12 - y \):</p>
                                <div class="math-block">
                                    $$ 3(12 - y) + 4y = 56 $$<br>
                                    $$ 36 - 3y + 4y = 56 $$<br>
                                    $$ 36 + y = 56 $$<br>
                                    $$ y = 20 $$
                                </div>
                                <p style="color: var(--error);">Impossible! We only have 12 vertices.</p>
                                <p><strong>Conclusion (a):</strong> No such graph exists. ❌</p>
                            </div>

                            <!-- Step 4 -->
                            <div class="p12-step hidden" id="p12-step-4">
                                <h4 style="color: var(--highlight);">Step 4: Part (b) Setup</h4>
                                <p>Degrees: 3 or 6. Let \( x \) (deg 3), \( y \) (deg 6).</p>
                                <div class="math-block">$$ x + y = 12 $$</div>
                                <div class="math-block">$$ 3x + 6y = 56 $$</div>
                            </div>

                            <!-- Step 5 -->
                            <div class="p12-step hidden" id="p12-step-5">
                                <h4 style="color: var(--highlight);">Step 5: Part (b) Solve</h4>
                                <p>Substitute \( x = 12 - y \):</p>
                                <div class="math-block">
                                    $$ 3(12 - y) + 6y = 56 $$<br>
                                    $$ 36 - 3y + 6y = 56 $$<br>
                                    $$ 36 + 3y = 56 $$<br>
                                    $$ 3y = 20 \implies y = 20/3 $$
                                </div>
                                <p style="color: var(--error);">Impossible! Vertex count must be integer.</p>
                                <p><strong>Conclusion (b):</strong> No such graph exists. ❌</p>
                            </div>

                            <!-- Step 6 -->
                            <div class="p12-step hidden" id="p12-step-6">
                                <h4 style="color: var(--success);">Step 6: Final Answers</h4>
                                <ul>
                                    <li>(a) <strong>No</strong> (Degrees too high).</li>
                                    <li>(b) <strong>No</strong> (Integer constraint violated).</li>
                                </ul>
                                <div class="highlight-box">
                                    <p><strong>Teaching Note:</strong> Always check if valid integer solutions exist for
                                        vertex counts.</p>
                                </div>
                            </div>

                        </div>

                        <!-- Right: Math Board -->
                        <div>
                            <div id="p12-board"
                                style="height: 300px; width: 100%; background: linear-gradient(145deg, #1e1e2f, #2a2a40); border-radius: 12px; border: 4px solid #444; box-shadow: inset 0 0 20px rgba(0,0,0,0.5); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 1rem; color: #fff; text-shadow: 0 1px 2px black;">
                                <h4 style="margin: 0; color: var(--text-muted); font-size: 0.9rem;">Math Blackboard</h4>
                                <div id="p12-equation-display"
                                    style="font-size: 1.4rem; font-family: 'Courier New', monospace; text-align: center; margin-top: auto; margin-bottom: auto;">
                                    Waiting for input...
                                </div>
                            </div>
                            <p
                                style="font-size: 0.8rem; margin-top: 0.5rem; color: var(--accent-color); text-align: center;">
                                Equation Solver</p>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div
                        style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--glass-border); display: flex; justify-content: space-between; align-items: center;">
                        <button class="btn-secondary hidden" onclick="prevStepP12()" id="p12-back-btn">⬅ Back</button>
                        <div style="margin-left: auto;">
                            <button class="btn-primary" onclick="nextStepP12()" id="p12-next-btn">Next Step ➜</button>
                            <button class="btn-secondary hidden" onclick="resetP12()" id="p12-reset-btn">Reset
                                Solution</button>
                        </div>
                    </div>
                </div>
                <!-- Back Arrow out of slide content -->
                <button class="nav-arrow arrow-left" onclick="navigateGrid(4, 0)"><svg viewBox="0 0 24 24">
                        <path d="M15 19l-7-7 7-7" />
                    </svg></button>
            </div>
        </div>

        <!-- Problem 15 -->
        <div class="row">
            <div class="slide">
                <div class="slide-content">
                    <h3>Problem 15</h3>
                    <div style="display: flex; gap: 2rem; align-items: flex-start; flex-wrap: wrap;">
                        <img src="p15_task.jpg" alt="Problem 15 Graphs"
                            style="max-width: 100%; max-height: 50vh; border-radius: 8px; border: 2px solid var(--glass-border); box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
                        <!-- <div style="flex: 1; min-width: 300px;">
                            <p style="font-size: 1.1em; line-height: 1.6;">
                                For each pair of graphs shown on the left, determine whether the graph on the left is a
                                <strong>subgraph</strong> of the graph on the right.
                            </p>
                            <ul style="font-size: 1.1em; margin-top: 1rem;">
                                <li><strong>(a)</strong> Square vs House-shape.</li>
                                <li><strong>(b)</strong> Square+Diagonal vs ZigZag Grid.</li>
                                <li><strong>(c)</strong> M-shape vs Oval.</li>
                                <li><strong>(d)</strong> U-shape vs Wheel.</li>
                            </ul>
                        </div> -->
                    </div>
                </div>
                <button class="nav-arrow arrow-right" onclick="navigateGrid(5, 1)" title="Solution"><svg
                        viewBox="0 0 24 24">
                        <path d="M13 7l5 5-5 5M6 7l5 5-5 5" />
                    </svg></button>
                <button class="nav-arrow arrow-down" onclick="scrollToRow(6)"><svg viewBox="0 0 24 24">
                        <path d="M7 13l5 5 5-5M7 6l5 5 5-5" />
                    </svg></button>
            </div>
            <div class="slide solution-slide">
                <div class="slide-content"
                    style="display: flex; flex-direction: column; height: 75vh; max-width: 100000px; width: 70%; margin: 0 auto; padding: 2rem;">

                    <!-- Content Area (Grid) -->
                    <div
                        style="display: grid; grid-template-columns: 1fr; gap: 2rem; flex: 1; overflow: hidden; min-height: 0;">
                        <!-- Left: Steps -->
                        <div
                            style="text-align: left; overflow-y: auto; padding-right: 1rem; position: relative; display: flex; flex-direction: column;">

                            <!-- Progress Bar -->
                            <div class="progress-bar">
                                <div class="step-circle active" id="sc-p15-1">1</div>
                                <div class="step-circle" id="sc-p15-2">2</div>
                                <div class="step-circle" id="sc-p15-3">3</div>
                                <div class="step-circle" id="sc-p15-4">4</div>
                                <div class="step-circle" id="sc-p15-5">5</div>
                                <div class="step-circle" id="sc-p15-6">6</div>
                                <div class="step-circle" id="sc-p15-7">7</div>
                            </div>

                            <h3>Step-by-Step Solution</h3>

                            <!-- Step 1 -->
                            <div class="p15-step" id="p15-step-1">
                                <h4 style="color: var(--highlight);">Step 1: Definition</h4>
                                <p>A graph \( H \) is a <strong>subgraph</strong> of \( G \) if:</p>
                                <ul>
                                    <li>Every vertex of \( H \) corresponds to a vertex in \( G \).</li>
                                    <li>Every edge of \( H \) exists in \( G \) between these vertices.</li>
                                </ul>
                            </div>

                            <!-- Step 2 -->
                            <div class="p15-step hidden" id="p15-step-2">
                                <h4 style="color: var(--highlight);">Step 2: Case (a)</h4>
                                <p><strong>Left:</strong> A 4-cycle (Square). 4 vertices, degree 2, closed loop.</p>
                                <p><strong>Right:</strong> Graph containing only triangles (3-cycles).</p>
                                <p><strong>Result:</strong> A subgraph must preserve edges. The right graph has no set
                                    of 4 vertices forming a square.</p>
                                <p style="color: var(--error);">❌ No, not a subgraph.</p>
                            </div>

                            <!-- Step 3 -->
                            <div class="p15-step hidden" id="p15-step-3">
                                <h4 style="color: var(--highlight);">Step 3: Case (b)</h4>
                                <p><strong>Left:</strong> Square with one diagonal (4-cycle + 1 chord).</p>
                                <p><strong>Right:</strong> Graph with overlapping "M" shapes.</p>
                                <p><strong>Result:</strong> Although edges cross, there is no set of 4 vertices that
                                    form a square with exactly one diagonal.</p>
                                <p style="color: var(--error);">❌ No, not a subgraph.</p>
                            </div>

                            <!-- Step 4 -->
                            <div class="p15-step hidden" id="p15-step-4">
                                <h4 style="color: var(--highlight);">Step 4: Case (c)</h4>
                                <p><strong>Left:</strong> 5 vertices, "M-like" crossed structure.</p>
                                <p><strong>Right:</strong> Symmetric oval graph with crossing diagonals.</p>
                                <p><strong>Result:</strong> By choosing the top, bottom, and side vertices correctly, we
                                    can reproduce the exact crossing pattern.</p>
                                <p style="color: var(--success);">✅ Yes, it is a subgraph.</p>
                            </div>

                            <!-- Step 5 -->
                            <div class="p15-step hidden" id="p15-step-5">
                                <h4 style="color: var(--highlight);">Step 5: Case (d)</h4>
                                <p><strong>Left:</strong> 6 vertices, "W-shaped" path + vertical edges.</p>
                                <p><strong>Right:</strong> Dense central graph (Wheel-like).</p>
                                <p><strong>Result:</strong> The specific "W" connection pattern of the left graph does
                                    not appear verbatim inside the right graph due to the central vertex constraints.
                                </p>
                                <p style="color: var(--error);">❌ No, not a subgraph.</p>
                            </div>

                            <!-- Step 6 -->
                            <div class="p15-step hidden" id="p15-step-6">
                                <h4 style="color: var(--success);">Step 6: Summary</h4>
                                <table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
                                    <tr style="border-bottom: 1px solid var(--text-muted);">
                                        <th style="padding: 0.5rem; text-align: left;">Case</th>
                                        <th style="padding: 0.5rem; text-align: left;">Subgraph?</th>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem;">(a) Square</td>
                                        <td style="color: var(--error);">No</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem;">(b) Square+Diag</td>
                                        <td style="color: var(--error);">No</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem;">(c) M-shape</td>
                                        <td style="color: var(--success);">Yes</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 0.5rem;">(d) W-shape</td>
                                        <td style="color: var(--error);">No</td>
                                    </tr>
                                </table>
                            </div>

                            <!-- Step 7 -->
                            <div class="p15-step hidden" id="p15-step-7">
                                <h4 style="color: var(--highlight);">Teaching Tips</h4>
                                <p>1. Ignore size difference; focus on finding the <em>pattern</em> inside.</p>
                                <p>2. Match <strong>degrees</strong> first.</p>
                                <p>3. If any edge is missing in the target, it fails.</p>
                            </div>

                        </div>
                    </div>

                    <!-- Footer -->
                    <div
                        style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid var(--glass-border); display: flex; justify-content: space-between; align-items: center;">
                        <button class="btn-secondary hidden" onclick="prevStepP15()" id="p15-back-btn">⬅
                            Back</button>
                        <div style="margin-left: auto;">
                            <button class="btn-primary" onclick="nextStepP15()" id="p15-next-btn">Next Step
                                ➜</button>
                            <button class="btn-secondary hidden" onclick="resetP15()" id="p15-reset-btn">Reset
                                Solution</button>
                        </div>
                    </div>
                </div>
                <!-- Back Arrow out of slide content -->
                <button class="nav-arrow arrow-left" onclick="navigateGrid(5, 0)"><svg viewBox="0 0 24 24">
                        <path d="M15 19l-7-7 7-7" />
                    </svg></button>
            </div>
        </div>

        <!-- Problem 17 -->
        <div class="row">
            <div class="slide">
                <div class="slide-content">
                    <h3>Problem 17</h3>
                    <div style="display: flex; gap: 2rem; align-items: flex-start; flex-wrap: wrap;">
                        <img src="p17_task.jpg" alt="Problem 17 Graphs"
                            style="max-width: 100%; max-height: 50vh; border-radius: 8px; border: 2px solid var(--glass-border); box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
                    </div>
                </div>
                <button class="nav-arrow arrow-right" onclick="navigateGrid(6, 1)" title="Solution"><svg
                        viewBox="0 0 24 24">
                        <path d="M13 7l5 5-5 5M6 7l5 5-5 5" />
                    </svg></button>
                <button class="nav-arrow arrow-down" onclick="scrollToRow(7)"><svg viewBox="0 0 24 24">
                        <path d="M7 13l5 5 5-5M7 6l5 5 5-5" />
                    </svg></button>
            </div>
            <div class="slide solution-slide">
                <div class="slide-content"
                    style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 75vh; max-width: 100000px; width: 70%; margin: 0 auto; padding: 2rem; text-align: center;">
                    <h2 style="font-size: 3rem; color: var(--highlight);">Ask the teacher</h2>
                    <p style="font-size: 1.2rem; margin-top: 1rem; color: var(--text-muted);">This solution is best
                        discussed in class.</p>
                </div>
                <!-- Back Button to Task Slide -->
                <button class="nav-arrow arrow-left" onclick="navigateGrid(6, 0)"><svg viewBox="0 0 24 24">
                        <path d="M15 19l-7-7 7-7" />
                    </svg></button>
            </div>
        </div>

        <!-- Problem 18 -->
        <div class="row">
            <div class="slide">
                <div class="slide-content">
                    <h3>Problem 18</h3>
                    <p style="font-size: 1rem; margin-bottom: 0.5rem;">For each of the following sequences, determine
                        whether there exists a graph whose degree sequence is the one specified.
                        In each case, either draw a graph or explain why no graph exists.
                    </p>
                    <ul style="font-size: 0.95rem; columns: 2; list-style: none; padding: 0;">
                        <li style="margin-bottom: 0.5rem;"><strong>(a)</strong> 4, 4, 4, 3, 2</li>
                        <li style="margin-bottom: 0.5rem;"><strong>(b)</strong> 100, 99, ..., 3, 2, 2, 2</li>
                        <li style="margin-bottom: 0.5rem;"><strong>(c)</strong> 5, 5, 4, 3, 2, 1</li>
                        <li style="margin-bottom: 0.5rem;"><strong>(d)</strong> 1, 1, 1, 1, 1, 1</li>
                        <li style="margin-bottom: 0.5rem;"><strong>(e)</strong> 5, 4, 3, 2, 1</li>
                        <li style="margin-bottom: 0.5rem;"><strong>(f)</strong> 5, 4, 3, 2, 1, 1</li>
                        <li style="margin-bottom: 0.5rem;"><strong>(g)</strong> 6, 6, 4, 2, 2, 2, 1, 1</li>
                        <li style="margin-bottom: 0.5rem;"><strong>(h)</strong> 4, 3, 2, 2, 1</li>
                    </ul>
                </div>
                <button class="nav-arrow arrow-right" onclick="navigateGrid(7, 1)" title="Solution"><svg
                        viewBox="0 0 24 24">
                        <path d="M13 7l5 5-5 5M6 7l5 5-5 5" />
                    </svg></button>
            </div>
            <div class="slide solution-slide">
                <div class="slide-content"
                    style="display: grid; grid-template-columns: 200px 1fr; gap: 2rem; height: 75vh; max-width: 100000px; width: 70%; padding: 2rem;">

                    <!-- Left: Selector -->
                    <div style="display: flex; flex-direction: column; gap: 0.5rem; overflow-y: auto;">
                        <h4 style="margin-bottom: 0.5rem; color: var(--text-muted);">Select Case:</h4>
                        <button class="btn-secondary p18-btn active" onclick="updateP18UI('a')"
                            id="p18-btn-a">(a)</button>
                        <button class="btn-secondary p18-btn" onclick="updateP18UI('b')" id="p18-btn-b">(b)</button>
                        <button class="btn-secondary p18-btn" onclick="updateP18UI('c')" id="p18-btn-c">(c)</button>
                        <button class="btn-secondary p18-btn" onclick="updateP18UI('d')" id="p18-btn-d">(d)</button>
                        <button class="btn-secondary p18-btn" onclick="updateP18UI('e')" id="p18-btn-e">(e)</button>
                        <button class="btn-secondary p18-btn" onclick="updateP18UI('f')" id="p18-btn-f">(f)</button>
                        <button class="btn-secondary p18-btn" onclick="updateP18UI('g')" id="p18-btn-g">(g)</button>
                        <button class="btn-secondary p18-btn" onclick="updateP18UI('h')" id="p18-btn-h">(h)</button>
                    </div>

                    <!-- Right: Details -->
                    <div
                        style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 2rem; border: 1px solid var(--glass-border); display: flex; flex-direction: column; justify-content: center;">
                        <h3 id="p18-seq-title" style="color: var(--highlight); margin-bottom: 1rem;">Sequence (a)</h3>
                        <p id="p18-seq-data" style="font-family: monospace; font-size: 1.2rem; margin-bottom: 2rem;">4,
                            4, 4, 3, 2</p>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                            <!-- Check 1 -->
                            <div>
                                <h4 style="color: var(--text-muted); font-size: 0.9rem;">Check 1: Sum of Degrees</h4>
                                <p id="p18-chk1" style="font-size: 1.1rem; margin-top: 0.5rem;">Sum = 17 (Odd)</p>
                            </div>
                            <!-- Check 2 -->
                            <div>
                                <h4 style="color: var(--text-muted); font-size: 0.9rem;">Check 2: Max Degree</h4>
                                <p id="p18-chk2" style="font-size: 1.1rem; margin-top: 0.5rem;">Max = 4 (n=5). OK.</p>
                            </div>
                        </div>

                        <div
                            style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--glass-border); text-align: center;">
                            <h2 id="p18-result" style="color: var(--error);">❌ No Graph Exists</h2>
                            <p id="p18-reason" style="margin-top: 1rem; color: var(--text-muted);">Sum of degrees is
                                odd.</p>
                        </div>
                    </div>

                </div>
                <button class="nav-arrow arrow-left" onclick="navigateGrid(7, 0)"><svg viewBox="0 0 24 24">
                        <path d="M15 19l-7-7 7-7" />
                    </svg></button>
            </div>
        </div>

    </div>
    <script src="script.js"></script>
    <script>
        // --- Problem 1 Interactive Logic ---
        let p1Step = 1;
        const totalP1Steps = 6;
        let p1Renderer = null;

        // Vertices Data (Fixed Positions)
        const p1Nodes = [
            { id: 'v1', x: 200, y: 50 },
            { id: 'v2', x: 50, y: 150 },
            { id: 'v3', x: 150, y: 200 },
            { id: 'v4', x: 300, y: 150 },
            { id: 'v5', x: 250, y: 250 }
        ];

        // Edges for each step (Cumulative)
        function getP1Edges(step) {
            let edges = [];
            if (step >= 2) edges.push({ source: 'v4', target: 'v5' }); // Step 2: (v4,v5)
            if (step >= 3) { // Step 3: (v1,v2), (v1,v3), (v1,v4)
                edges.push({ source: 'v1', target: 'v2' });
                edges.push({ source: 'v1', target: 'v3' });
                edges.push({ source: 'v1', target: 'v4' });
            }
            if (step >= 4) edges.push({ source: 'v3', target: 'v5' }); // Step 4: (v3,v5)
            return edges;
        }

        // Centralized UI Update
        function updateP1UI() {
            // 1. Text Steps Visibility
            document.querySelectorAll('.p1-step').forEach(el => el.classList.add('hidden'));
            const currentStepEl = document.getElementById(`p1-step-${p1Step}`);
            if (currentStepEl) currentStepEl.classList.remove('hidden');

            // 2. Progress Bar
            for (let i = 1; i <= totalP1Steps; i++) {
                const c = document.getElementById(`sc-${i}`);
                if (c) {
                    c.classList.remove('active', 'completed');
                    c.innerHTML = i; // Reset content

                    if (i < p1Step) {
                        c.classList.add('completed');
                        c.innerHTML = '✔';
                    } else if (i === p1Step) {
                        c.classList.add('active');
                    }
                }
            }

            // 3. Graph
            if (p1Renderer) {
                p1Renderer.draw(p1Nodes, getP1Edges(p1Step), { nodeRadius: 18 });
            }

            // 4. Buttons State
            const btnNext = document.getElementById('p1-next-btn');
            const btnBack = document.getElementById('p1-back-btn');
            const btnReset = document.getElementById('p1-reset-btn');

            // Back Button
            if (p1Step > 1) btnBack.classList.remove('hidden');
            else btnBack.classList.add('hidden');

            // Next / Reset Buttons
            if (p1Step === totalP1Steps) {
                btnNext.classList.add('hidden');
                btnReset.classList.remove('hidden');
            } else {
                btnNext.classList.remove('hidden');
                btnReset.classList.add('hidden');
            }
        }

        window.nextStepP1 = function () {
            if (p1Step < totalP1Steps) {
                p1Step++;
                updateP1UI();
            }
        };

        window.prevStepP1 = function () {
            if (p1Step > 1) {
                p1Step--;
                updateP1UI();
            }
        };

        window.resetP1 = function () {
            p1Step = 1;
            updateP1UI();
        };

        // --- Problem 3 Interactive Logic ---
        let p3Step = 1;
        const totalP3Steps = 6;
        let p3Renderer = null;

        const p3Nodes = [
            { id: 'v1', x: 100, y: 50 },
            { id: 'v2', x: 300, y: 50 },
            { id: 'v3', x: 300, y: 250 },
            { id: 'v4', x: 100, y: 250 }
        ];

        function getP3Edges(step) {
            // Edges appear from Step 3 onwards (when we define the graph)
            if (step >= 3) {
                return [
                    { source: 'v1', target: 'v2' },
                    { source: 'v2', target: 'v3' },
                    { source: 'v3', target: 'v4' },
                    { source: 'v4', target: 'v1' }
                ];
            }
            return [];
        }

        function updateP3UI() {
            // 1. Text Steps Visibility
            document.querySelectorAll('.p3-step').forEach(el => el.classList.add('hidden'));
            const s = document.getElementById(`p3-step-${p3Step}`);
            if (s) s.classList.remove('hidden');

            // 2. Progress Bar
            for (let i = 1; i <= totalP3Steps; i++) {
                const c = document.getElementById(`sc-p3-${i}`);
                if (c) {
                    c.classList.remove('active', 'completed');
                    c.innerHTML = i;
                    if (i < p3Step) { c.classList.add('completed'); c.innerHTML = '✔'; }
                    else if (i === p3Step) { c.classList.add('active'); }
                }
            }

            // 3. Graph
            if (p3Renderer) {
                // In Step 1 & 2, show NO graph? Or just nodes?
                // User text Step 3 says "Define Graph". Step 2 says "Propose Example".
                // Let's show nodes at Step 2. Empty at Step 1.
                let nodesToShow = [];
                let edgesToShow = [];

                if (p3Step >= 2) nodesToShow = p3Nodes;
                edgesToShow = getP3Edges(p3Step);

                p3Renderer.draw(nodesToShow, edgesToShow, { nodeRadius: 18 });
            }

            // 4. Buttons
            const btnNext = document.getElementById('p3-next-btn');
            const btnBack = document.getElementById('p3-back-btn');
            const btnReset = document.getElementById('p3-reset-btn');

            if (btnBack) {
                if (p3Step > 1) btnBack.classList.remove('hidden');
                else btnBack.classList.add('hidden');
            }

            if (btnNext && btnReset) {
                if (p3Step === totalP3Steps) {
                    btnNext.classList.add('hidden');
                    btnReset.classList.remove('hidden');
                } else {
                    btnNext.classList.remove('hidden');
                    btnReset.classList.add('hidden');
                }
            }
        }

        window.nextStepP3 = function () {
            if (p3Step < totalP3Steps) { p3Step++; updateP3UI(); }
        };
        window.prevStepP3 = function () {
            if (p3Step > 1) { p3Step--; updateP3UI(); }
        };
        window.resetP3 = function () {
            p3Step = 1; updateP3UI();
        };

        // --- Problem 5 Interactive Logic ---
        let p5Step = 1;
        const totalP5Steps = 5;
        let p5Renderer = null;

        // Pentagonal Layout for K5
        const p5Nodes = [];
        for (let i = 0; i < 5; i++) {
            // Center (200, 150), Radius ~100
            const angle = (i * 2 * Math.PI / 5) - Math.PI / 2; // Start at top
            p5Nodes.push({
                id: `v${i + 1}`,
                x: 200 + 100 * Math.cos(angle),
                y: 150 + 100 * Math.sin(angle)
            });
        }

        // Complete Graph Edges (All pairs)
        const p5Edges = [];
        for (let i = 0; i < 5; i++) {
            for (let j = i + 1; j < 5; j++) {
                p5Edges.push({ source: `v${i + 1}`, target: `v${j + 1}` });
            }
        }

        function updateP5UI() {
            // 1. Text Steps Visibility
            document.querySelectorAll('.p5-step').forEach(el => el.classList.add('hidden'));
            const s = document.getElementById(`p5-step-${p5Step}`);
            if (s) s.classList.remove('hidden');

            // 2. Progress Bar
            for (let i = 1; i <= totalP5Steps; i++) {
                const c = document.getElementById(`sc-p5-${i}`);
                if (c) {
                    c.classList.remove('active', 'completed');
                    c.innerHTML = i;
                    if (i < p5Step) { c.classList.add('completed'); c.innerHTML = '✔'; }
                    else if (i === p5Step) { c.classList.add('active'); }
                }
            }

            // 3. Graph
            if (p5Renderer) {
                // Show nodes always. Show edges gradually?
                // Step 1: Just nodes
                // Step 2,3: Just nodes (Concept)
                // Step 4: Show Edges (Description)
                let edgesToShow = [];
                if (p5Step >= 4) edgesToShow = p5Edges;

                p5Renderer.draw(p5Nodes, edgesToShow, { nodeRadius: 15 });
            }

            // 4. Buttons
            const btnNext = document.getElementById('p5-next-btn');
            const btnBack = document.getElementById('p5-back-btn');
            const btnReset = document.getElementById('p5-reset-btn');

            if (btnBack) {
                if (p5Step > 1) btnBack.classList.remove('hidden');
                else btnBack.classList.add('hidden');
            }

            if (btnNext && btnReset) {
                if (p5Step === totalP5Steps) {
                    btnNext.classList.add('hidden');
                    btnReset.classList.remove('hidden');
                } else {
                    btnNext.classList.remove('hidden');
                    btnReset.classList.add('hidden');
                }
            }
        }

        window.nextStepP5 = function () {
            if (p5Step < totalP5Steps) { p5Step++; updateP5UI(); }
        };
        window.prevStepP5 = function () {
            if (p5Step > 1) { p5Step--; updateP5UI(); }
        };
        window.resetP5 = function () {
            p5Step = 1; updateP5UI();
        };

        // --- Problem 12 Interactive Logic ---
        let p12Step = 1;
        const totalP12Steps = 6;

        function updateP12UI() {
            // 1. Text Steps Visibility
            document.querySelectorAll('.p12-step').forEach(el => el.classList.add('hidden'));
            const s = document.getElementById(`p12-step-${p12Step}`);
            if (s) s.classList.remove('hidden');

            // 2. Progress Bar
            for (let i = 1; i <= totalP12Steps; i++) {
                const c = document.getElementById(`sc-p12-${i}`);
                if (c) {
                    c.classList.remove('active', 'completed');
                    c.innerHTML = i;
                    if (i < p12Step) { c.classList.add('completed'); c.innerHTML = '✔'; }
                    else if (i === p12Step) { c.classList.add('active'); }
                }
            }

            // 3. Math Board Update
            const board = document.getElementById('p12-equation-display');
            if (board) {
                let content = '';
                if (p12Step === 1) content = "Total Degrees = 56";
                else if (p12Step === 2) content = "x + y = 12<br>3x + 4y = 56";
                else if (p12Step === 3) content = "y = 20<br><span style='color:#ff4444'>Impossible (20 > 12)</span>";
                else if (p12Step === 4) content = "x + y = 12<br>3x + 6y = 56";
                else if (p12Step === 5) content = "y = 20/3<br><span style='color:#ff4444'>Not Integer</span>";
                else if (p12Step === 6) content = "(a) No<br>(b) No";

                board.innerHTML = content;
            }

            // 4. Buttons
            const btnNext = document.getElementById('p12-next-btn');
            const btnBack = document.getElementById('p12-back-btn');
            const btnReset = document.getElementById('p12-reset-btn');

            if (btnBack) {
                if (p12Step > 1) btnBack.classList.remove('hidden');
                else btnBack.classList.add('hidden');
            }

            if (btnNext && btnReset) {
                if (p12Step === totalP12Steps) {
                    btnNext.classList.add('hidden');
                    btnReset.classList.remove('hidden');
                } else {
                    btnNext.classList.remove('hidden');
                    btnReset.classList.add('hidden');
                }
            }
        }

        window.nextStepP12 = function () {
            if (p12Step < totalP12Steps) { p12Step++; updateP12UI(); }
        };
        window.prevStepP12 = function () {
            if (p12Step > 1) { p12Step--; updateP12UI(); }
        };
        window.resetP12 = function () {
            p12Step = 1; updateP12UI();
        };

        // --- Problem 15 Interactive Logic ---
        let p15Step = 1;
        const totalP15Steps = 7;
        let p15Renderer = null;

        // --- Graph Data (Left vs Right) ---
        // Scale note: Container is small (400x300).
        // Left graph: x ~ 50-150. Right graph: x ~ 250-350.

        function updateP15UI() {
            // 1. Text Steps Visibility
            document.querySelectorAll('.p15-step').forEach(el => el.classList.add('hidden'));
            const s = document.getElementById(`p15-step-${p15Step}`);
            if (s) s.classList.remove('hidden');

            // 2. Progress Bar
            for (let i = 1; i <= totalP15Steps; i++) {
                const c = document.getElementById(`sc-p15-${i}`);
                if (c) {
                    c.classList.remove('active', 'completed');
                    c.innerHTML = i;
                    if (i < p15Step) { c.classList.add('completed'); c.innerHTML = '✔'; }
                    else if (i === p15Step) { c.classList.add('active'); }
                }
            }

            // 3. Buttons
            const btnNext = document.getElementById('p15-next-btn');
            const btnBack = document.getElementById('p15-back-btn');
            const btnReset = document.getElementById('p15-reset-btn');

            if (btnBack) {
                if (p15Step > 1) btnBack.classList.remove('hidden');
                else btnBack.classList.add('hidden');
            }

            if (btnNext && btnReset) {
                if (p15Step === totalP15Steps) {
                    btnNext.classList.add('hidden');
                    btnReset.classList.remove('hidden');
                } else {
                    btnNext.classList.remove('hidden');
                    btnReset.classList.add('hidden');
                }
            }
        }

        window.nextStepP15 = function () {
            if (p15Step < totalP15Steps) { p15Step++; updateP15UI(); }
        };
        window.prevStepP15 = function () {
            if (p15Step > 1) { p15Step--; updateP15UI(); }
        };
        window.resetP15 = function () {
            p15Step = 1; updateP15UI();
        };

        // --- Problem 18 Interactive Logic ---
        const p18Cases = {
            'a': {
                seq: "4, 4, 4, 3, 2",
                chk1: "Sum = 17 (Odd)",
                chk1Status: "fail",
                chk2: "Max = 4 (n=5). Required Max <= 4. OK.",
                chk2Status: "pass",
                result: "❌ No Graph Exists",
                reason: "Sum of degrees is odd (Handshaking Lemma violated)."
            },
            'b': {
                seq: "100, 99, ..., 3, 2, 2, 2",
                chk1: "Sum = Depends (Unknown length)",
                chk1Status: "neutral",
                chk2: "Max = 100. Required n >= 101.",
                chk2Status: "fail",
                result: "❌ No Graph Exists",
                reason: "Contains degree 100, but max allowed is n-1. Inconsistent here."
            },
            'c': {
                seq: "5, 5, 4, 3, 2, 1",
                chk1: "Sum = 20 (Even)",
                chk1Status: "pass",
                chk2: "Max = 5 (n=6). Required Max <= 5. OK.",
                chk2Status: "pass",
                result: "✅ Graph Exists",
                reason: "Sequence is graphical (Havel-Hakimi consistent)."
            },
            'd': {
                seq: "1, 1, 1, 1, 1, 1",
                chk1: "Sum = 6 (Even)",
                chk1Status: "pass",
                chk2: "Max = 1 (n=6). OK.",
                chk2Status: "pass",
                result: "✅ Graph Exists",
                reason: "3 disjoint edges (Matching)."
            },
            'e': {
                seq: "5, 4, 3, 2, 1",
                chk1: "Sum = 15 (Odd)",
                chk1Status: "fail",
                chk2: "Max = 5 (n=5). Required Max <= 4.",
                chk2Status: "fail",
                result: "❌ No Graph Exists",
                reason: "Sum is odd AND Max Degree > n-1."
            },
            'f': {
                seq: "5, 4, 3, 2, 1, 1",
                chk1: "Sum = 16 (Even)",
                chk1Status: "pass",
                chk2: "Max = 5 (n=6). Required Max <= 5. OK.",
                chk2Status: "pass",
                result: "✅ Graph Exists",
                reason: "Sequence is graphical."
            },
            'g': {
                seq: "6, 6, 4, 2, 2, 2, 1, 1",
                chk1: "Sum = 24 (Even)",
                chk1Status: "pass",
                chk2: "Max = 6 (n=8). Required Max <= 7. OK.",
                chk2Status: "pass",
                result: "✅ Graph Exists",
                reason: "Sequence is graphical."
            },
            'h': {
                seq: "4, 3, 2, 2, 1",
                chk1: "Sum = 12 (Even)",
                chk1Status: "pass",
                chk2: "Max = 4 (n=5). Required Max <= 4. OK.",
                chk2Status: "pass",
                result: "✅ Graph Exists",
                reason: "Sequence is graphical."
            }
        };

        function updateP18UI(caseKey) {
            // Update Active Menu
            document.querySelectorAll('.p18-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`p18-btn-${caseKey}`).classList.add('active');

            const data = p18Cases[caseKey];

            // Update Text
            document.getElementById('p18-seq-title').innerText = `Sequence (${caseKey})`;
            document.getElementById('p18-seq-data').innerText = data.seq;

            const c1 = document.getElementById('p18-chk1');
            c1.innerText = data.chk1;
            c1.style.color = data.chk1Status === 'fail' ? 'var(--error)' : (data.chk1Status === 'pass' ? 'var(--success)' : 'var(--text-muted)');

            const c2 = document.getElementById('p18-chk2');
            c2.innerText = data.chk2;
            c2.style.color = data.chk2Status === 'fail' ? 'var(--error)' : (data.chk2Status === 'pass' ? 'var(--success)' : 'var(--text-muted)');

            const res = document.getElementById('p18-result');
            res.innerText = data.result;
            res.style.color = data.result.includes('No') ? 'var(--error)' : 'var(--success)';

            document.getElementById('p18-reason').innerText = data.reason;
        }

        // Initialize Everything
        window.addEventListener('load', () => {
            console.log("Initializing Week 8 Graphics...");

            if (window.GraphRenderer) {
                // Init P1
                p1Renderer = new GraphRenderer('p1-graph');
                if (p1Renderer) {
                    p1Renderer.draw(p1Nodes, [], { nodeRadius: 18 });
                }

                // Init P3
                p3Renderer = new GraphRenderer('p3-graph');
                if (p3Renderer) {
                    updateP3UI();
                }

                // Init P5
                p5Renderer = new GraphRenderer('p5-graph');
                if (p5Renderer) {
                    updateP5UI();
                }

                // Init P12 (No Graph, just UI)
                updateP12UI();

                // Init P15 (UI Only)
                updateP15UI();

                // Init P18
                updateP18UI('a');
            }
        });
    </script>
</body>

</html>